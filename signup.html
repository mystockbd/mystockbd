<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>সেলার সাইন আপ | MyStockBD</title>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
<style>
:root {
  --primary: #2563eb;
  --accent: #06b6d4;
  --radius: 16px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Noto Sans Bengali',sans-serif;
  background: linear-gradient(135deg,#1e3a8a,#0ea5e9,#06b6d4);
  display:flex;align-items:center;justify-content:center;
  min-height:100vh;padding:1rem;
}
.container{
  max-width:500px;width:100%;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(20px);
  border-radius: var(--radius);
  box-shadow:0 20px 45px rgba(0,0,0,0.25);
  padding:2rem;
}
h2{text-align:center;color:#fff;font-size:1.8rem;margin-bottom:0.5rem;}
p{font-size:0.9rem;color:#e5e7eb;text-align:center;margin-bottom:1rem;}
p a{color:#facc15;text-decoration:none;font-weight:600;}

.input-group{position:relative;margin-bottom:1rem;}
.input-group input{
  width:100%;padding:0.75rem 2.5rem;
  border:1px solid rgba(255,255,255,0.3);
  border-radius:var(--radius);
  font-size:0.95rem;outline:none;
  color:#fff;background: rgba(255,255,255,0.1);
}
.toggle-eye{
  position:absolute;right:14px;top:50%;
  transform:translateY(-50%);
  cursor:pointer;color:#cbd5e1;
}
.error-msg,.success-msg{
  display:none;padding:0.7rem;border-radius:0.5rem;
  margin-bottom:1rem;text-align:center;font-weight:600;
}
.error-msg{background:#fee2e2;color:#ef4444;}
.success-msg{background:#d1fae5;color:#065f46;}
button{
  width:100%;background: linear-gradient(135deg,var(--primary),var(--accent));
  color:white;padding:1rem;border:none;border-radius:var(--radius);
  font-size:1rem;font-weight:600;cursor:pointer;
}
</style>
</head>
<body>
<div class="container">
  <h2>সেলার সাইন আপ করুন</h2>
  <p>ইতিমধ্যেই অ্যাকাউন্ট আছে? <a href="login.html">লগইন করুন</a></p>

  <div class="error-msg" id="signupError"></div>
  <div class="success-msg" id="signupSuccess"></div>

  <form id="signupForm">
    <div class="input-group"><input type="text" id="name" placeholder="আপনার নাম লিখুন" required></div>
    <div class="input-group"><input type="email" id="email" placeholder="আপনার ইমেইল লিখুন" required></div>
    <div class="input-group">
      <input type="password" id="password" placeholder="পাসওয়ার্ড লিখুন" required>
      <span class="toggle-eye material-icons-outlined" id="togglePasswordEye">visibility</span>
    </div>
    <div class="input-group">
      <input type="password" id="confirmPassword" placeholder="পাসওয়ার্ড নিশ্চিত করুন" required>
      <span class="toggle-eye material-icons-outlined" id="toggleConfirmEye">visibility</span>
    </div>
    <button type="submit">সাইন আপ করুন</button>
  </form>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCvU3TKoohJJZzDCfmRBWsMdRgANGTbQlI",
  authDomain: "mystockbd-3a3a5.firebaseapp.com",
  projectId: "mystockbd-3a3a5",
  storageBucket: "mystockbd-3a3a5.appspot.com",
  messagingSenderId: "50827837653",
  appId: "1:50827837653:web:7c38c1c4bf3d5f7c82225c",
  measurementId: "G-2SFWHJ8B0L"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

const signupForm = document.getElementById('signupForm');
const signupError = document.getElementById('signupError');
const signupSuccess = document.getElementById('signupSuccess');
const togglePasswordEye = document.getElementById('togglePasswordEye');
const toggleConfirmEye = document.getElementById('toggleConfirmEye');
const passwordInput = document.getElementById('password');
const confirmPasswordInput = document.getElementById('confirmPassword');

// Password toggle
togglePasswordEye.addEventListener('click', ()=>{
  passwordInput.type = passwordInput.type==='password'?'text':'password';
  togglePasswordEye.textContent = passwordInput.type==='password'?'visibility':'visibility_off';
});
toggleConfirmEye.addEventListener('click', ()=>{
  confirmPasswordInput.type = confirmPasswordInput.type==='password'?'text':'password';
  toggleConfirmEye.textContent = confirmPasswordInput.type==='password'?'visibility':'visibility_off';
});

// Signup
signupForm.addEventListener('submit', async (e)=>{
  e.preventDefault();
  signupError.style.display='none'; signupSuccess.style.display='none';

  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const password = passwordInput.value;
  const confirmPassword = confirmPasswordInput.value;

  if(password !== confirmPassword){
    signupError.style.display='block';
    signupError.textContent="পাসওয়ার্ড মিলছে না!";
    return;
  }

  try {
    const userCredential = await auth.createUserWithEmailAndPassword(email,password);
    const uid = userCredential.user.uid;
    const storeId = "store_" + uid;

    await db.collection('sellers').doc(uid).set({
      name,email,
      status: "active",
      storeId,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });

    signupSuccess.style.display='block';
    signupSuccess.textContent="✅ একাউন্ট সফলভাবে তৈরি হয়েছে এবং এখনই Active করা হয়েছে!";
    signupForm.reset();
    setTimeout(()=>{window.location.href='index.html';},2000);

  } catch(error){
    signupError.style.display='block';
    if(error.code==='auth/email-already-in-use'){
      signupError.textContent="এই ইমেইলটি আগে থেকেই ব্যবহার করা হচ্ছে।";
    } else if(error.code==='auth/weak-password'){
      signupError.textContent="পাসওয়ার্ড অন্তত ৬ অক্ষরের হতে হবে।";
    } else {
      signupError.textContent="কিছু সমস্যা হয়েছে। আবার চেষ্টা করুন।";
    }
    console.error(error);
  }
});
</script>
</body>
</html>
